var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,r=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&l(e,n,t[n]);if(a)for(var n of a(t))s.call(t,n)&&l(e,n,t[n]);return e},i=(e,a)=>t(e,n(a));import{a as u,r as d,c,u as m,p,b as g,d as _,e as v,o as f,f as h,g as b,h as y,w as P,i as C,t as S,_ as k,j as E,k as I,F as T,l as j,m as L,n as A,q as V,s as O,v as D,x as w,y as U,z as R,A as F,B as $,C as x,D as N,E as M,G as K,H,I as B,J as z,K as W,L as G,M as q,N as J,O as Y,P as Q,Q as X,R as Z,S as ee,T as te,U as ne,V as ae,W as oe,X as se,Y as le,Z as re,$ as ie}from"./vendor.143c5c5a.js";const ue=location.hostname.includes(".")?location.protocol+"//www"+location.hostname.substr(location.hostname.indexOf(".")):location.origin,de=u.create({baseURL:ue,withCredentials:"https:"===location.protocol}),ce=e=>(null==e?void 0:e.status)>=300?Promise.reject(new Error("failed to call url")):null==e?void 0:e.data,me=d({user:null,isLoaded:!1,userPromise:null}),pe=()=>{me.user=null,me.isLoaded=!1,me.userPromise=null,de.post("/api/logout"),No.push({name:"login"})},ge=async()=>{if(me.user||me.userPromise)return me.userPromise;try{me.userPromise=de.get("/api/me").then((e=>e.data));const e=await me.userPromise;if(null==e?void 0:e.roles.find((e=>"admin"===e||"editor"===e)))return me.user=e,e;throw new Error("user is not authorized")}catch(e){pe()}finally{me.isLoaded=!0}};function _e(){const e=d({email:"",password:""});return{form:e,login:()=>(async({email:e,password:t})=>{const{data:{payload:n}}=await de.post("/api/signin",{email:e,password:t,roles:["admin","editor"]});me.user=n.user,me.isLoaded=!0,me.userPromise=Promise.resolve(n.user)})({email:e.email,password:e.password}),isLoggedIn:c((()=>!!me.user))}}const ve={name:"Header",setup(e,{emit:t}){const n=m(),{user:a,logout:o}={logout:pe,user:c((()=>me.user))};return{user:a,open:()=>t("open"),logout:async()=>{await o(),n.push("login")}}}},fe=C();p("data-v-07f54447");const he={class:"actions"};g();const be=fe(((e,t,n,a,o,s)=>{const l=_("el-button"),r=v("t");return f(),h("header",{dir:e.$t("appDirection")},[b(l,{type:"default",icon:"el-icon-menu",class:"btn",circle:"",onClick:a.open},null,8,["onClick"]),a.user?(f(),h("span",{key:0,class:"user-welcome",innerHTML:e.$t("Hello {userName}",{userName:a.user.name})},null,8,["innerHTML"])):y("",!0),b("div",he,[P(b("a",{onClick:t[1]||(t[1]=(...e)=>a.logout&&a.logout(...e))},null,512),[[r,"Logout"]])])],8,["dir"])}));ve.render=be,ve.__scopeId="data-v-07f54447";var ye="/gp-admin/assets/logo.d6cabb42.png";const Pe={name:"Navigation",props:{opened:Boolean},setup:(e,{emit:t})=>({close:()=>t("close")})},Ce=C();p("data-v-9e80e0f6");const Se=b("img",{alt:"greenpress Admin Panel",src:ye},null,-1),ke=b("i",{class:"el-icon-setting"},null,-1),Ee=b("i",{class:"el-icon-files"},null,-1),Ie=b("i",{class:"el-icon-menu"},null,-1),Te=b("i",{class:"el-icon-folder-opened"},null,-1),je=b("i",{class:"el-icon-document"},null,-1),Le=b("i",{class:"el-icon-user"},null,-1),Ae=b("i",{class:"el-icon-document-copy"},null,-1);g();const Ve=Ce(((e,t,n,a,o,s)=>{const l=_("router-link");return f(),h("nav",{class:{show:n.opened}},[b("div",{class:"mobile-mask",onClick:t[1]||(t[1]=(...e)=>a.close&&a.close(...e))}),b(l,{to:"/",class:"home-logo"},{default:Ce((()=>[Se])),_:1}),b(l,{to:"/configurations"},{default:Ce((()=>[ke,b("span",null,S(e.$t("Configurations")),1)])),_:1}),b(l,{to:"/assets"},{default:Ce((()=>[Ee,b("span",null,S(e.$t("Storage & Assets")),1)])),_:1}),b(l,{to:"/menus"},{default:Ce((()=>[Ie,b("span",null,S(e.$t("Menus")),1)])),_:1}),b(l,{to:"/categories"},{default:Ce((()=>[Te,b("span",null,S(e.$t("Categories")),1)])),_:1}),b(l,{to:"/posts"},{default:Ce((()=>[je,b("span",null,S(e.$t("Posts")),1)])),_:1}),b(l,{to:"/users"},{default:Ce((()=>[Le,b("span",null,S(e.$t("Users")),1)])),_:1}),b(l,{to:"/drafts"},{default:Ce((()=>[Ae,b("span",null,S(e.$t("Drafts")),1)])),_:1})],2)}));function Oe(e){return{getAll:t=>de.get(e,{params:t}).then(ce),getOne:t=>de.get(`${e}/${t}`).then(ce),create:t=>de.post(e,t).then(ce),remove:t=>de.delete(`${e}/${t}`).then((e=>e.status>=300?Promise.reject(e):e)),update:(t,n)=>de.put(`${e}/${t}`,n).then(ce)}}Pe.render=Ve,Pe.__scopeId="data-v-9e80e0f6";const De=Oe("/api/storage"),we=d({loaded:!1,loading:!1,storages:[]});function Ue(){return{success:e=>k.success(e),error:e=>k.error(e)}}function Re(e,t={}){const n=E(!1),{error:a,success:o}=Ue(),s="function"==typeof t.error?t.error:e=>t.error||e.message||e,l="function"==typeof t.success?t.success:()=>t.success;return{submitting:n,submit:function(...t){return n.value=!0,e(...t).then((e=>{const t=l(e);return t&&o(t),e})).catch((e=>{a(s(e))})).finally((()=>n.value=!1))}}}function Fe(){!async function(){if(!we.loaded&&!we.loading){we.loading=!0,we.loaded=!1;try{we.storages=await De.getAll(),we.loaded=!0}catch(e){we.loaded=!1}finally{we.loading=!1}}}();const{submit:e}=Re((({_id:e})=>async function(e){await De.remove(e),we.storages=we.storages.filter((t=>t._id!==e))}(e)),{success:"Storage removed successfully",error:"Failed to remove storage"});return{items:c((()=>we.storages)),remove:e}}const $e={name:"AssetsStorageSelector",props:{value:String},setup(e,{emit:t}){const{items:n}=Fe(),{selected:a,change:o}=function(e,t,n){const a=E(null);return I((()=>e),(()=>{a.value=t.value.find((t=>t._id===e.value))})),{selected:a,change:e=>{a.value=e,n("change",e)}}}(e.value,n,t);return{items:n,selected:a,change:o}}},xe=C();p("data-v-331b88b4");const Ne={class:"select-storage"};g();const Me=xe(((e,t,n,a,o,s)=>{const l=_("el-option"),r=_("el-select");return f(),h("div",Ne,[b("label",null,S(e.$t("Storage"))+":",1),b(r,{onChange:a.change,"model-value":a.selected,class:"storage-selection"},{default:xe((()=>[(f(!0),h(T,null,j(a.items,(e=>(f(),h(l,{key:e._id,value:e,label:e.name},null,8,["value","label"])))),128))])),_:1},8,["onChange","model-value"])])}));$e.render=Me,$e.__scopeId="data-v-331b88b4";const Ke={name:"BasicFileUploader",props:{storage:String},setup(e,{root:t,emit:n}){const a=E(""),{headers:o,uploadUrl:s,setUploadUrl:l}=function(e,t){const n=E("");return{headers:c((()=>de.defaults.headers.common)),setUploadUrl(a){const o=a.name.split("."),s=new URL(`/api/assets/${e}`,de.defaults.baseURL),l=t.value+(t.value.endsWith("/")?"":"/");s.searchParams.append("identifier",l),s.searchParams.append("prefix",o[0].replace(/ /g,"")),s.searchParams.append("extension",o[o.length-1]),n.value=s.toString()},uploadUrl:n}}(e.storage,a);return{headers:o,uploadUrl:s,beforeUpload:e=>(l(e),t.$nextTick()),location:a,onSuccess(e){n("upload",e)}}}},He=C();p("data-v-38cc3ac8");const Be={class:"basic-file-uploader"},ze=b("i",{class:"el-icon-upload"},null,-1),We=b("div",{class:"el-upload__text"},[L(" Drop file here or "),b("em",null,"click to upload")],-1),Ge=b("div",{class:"el-upload__tip",slot:"tip"}," jpg/png files with a size less than 500kb ",-1);g();const qe=He(((e,t,n,a,o,s)=>{const l=_("el-input"),r=_("el-upload");return f(),h("div",Be,[b(l,{modelValue:a.location,"onUpdate:modelValue":t[1]||(t[1]=e=>a.location=e),placeholder:"Choose Location"},null,8,["modelValue"]),b(r,{class:"uploader",drag:"",headers:a.headers,action:a.uploadUrl,"on-success":a.onSuccess,"before-upload":a.beforeUpload},{default:He((()=>[ze,We,Ge])),_:1},8,["headers","action","on-success","before-upload"])])}));Ke.render=qe,Ke.__scopeId="data-v-38cc3ac8";var Je=A({name:"BasicAssetsList",props:{storage:{type:String,required:!0},identifier:{type:String,default:"/"}},setup(e){const t=E(!1),n=E([]);return I((()=>e.storage+e.identifier),(async()=>{t.value=!1;try{n.value=await(a=e.storage,o=e.identifier,de.get("/api/assets/"+a,{params:{identifier:o}}).then(ce))}finally{t.value=!0}var a,o})),{loaded:t,assets:n}}});const Ye=C();p("data-v-0a532a36");const Qe={key:0,class:"assets-list"},Xe={key:1,class:"el-icon-warning-outline"};g();const Ze=Ye(((e,t,n,a,o,s)=>e.loaded?(f(),h("div",Qe,[(f(!0),h(T,null,j(e.assets,(e=>(f(),h("div",{key:e.identifier,class:"asset-box"},["image"===e.type?(f(),h("img",{key:0,src:e.publicUrl},null,8,["src"])):(f(),h("i",Xe))])))),128))])):y("",!0)));Je.render=Ze,Je.__scopeId="data-v-0a532a36";var et={name:"AssetsDetailsPanel",components:{BasicFileUploader:Ke,AssetsStorageSelector:$e,BasicAssetsList:Je},setup(){const e=E(!1);return{togglePanel:()=>e.value=!e.value,selectedStorage:E(),isOpen:e}}};const tt=C();p("data-v-375474f4");const nt={class:"content"};g();const at=tt(((e,t,n,a,o,s)=>{const l=_("AssetsStorageSelector"),r=_("BasicFileUploader"),i=_("BasicAssetsList");return f(),h("div",{class:a.isOpen?"panel open":"panel",dir:e.$t("appDirection")},[b("a",{onClick:t[1]||(t[1]=(...e)=>a.togglePanel&&a.togglePanel(...e)),class:"toggle"},[b("i",{class:a.isOpen?"el-icon-arrow-right":"el-icon-arrow-left"},null,2)]),b("div",nt,[b(l,{onChange:t[2]||(t[2]=e=>a.selectedStorage=e._id)}),a.selectedStorage?(f(),h(T,{key:0},[b(r,{storage:a.selectedStorage},null,8,["storage"]),b(i,{storage:a.selectedStorage},null,8,["storage"])],64)):y("",!0)])],10,["dir"])}));et.render=at,et.__scopeId="data-v-375474f4";var ot=A({name:"Authenticated",components:{AssetsDetailsPanel:et,Header:ve,Navigation:Pe},setup(){const e=m(),t=E(!1);return e.afterEach((()=>t.value=!1)),i(r({},function(){const e=c((()=>me.isLoaded));return ge(),{isLoaded:e}}()),{navigationOpened:t})}});const st=C();p("data-v-7cbca294");const lt={key:0,class:"admin-panel"},rt={class:"admin-content"};g();const it=st(((e,t,n,a,o,s)=>{const l=_("Navigation"),r=_("Header"),i=_("router-view"),u=_("AssetsDetailsPanel");return e.isLoaded?(f(),h("div",lt,[b(l,{class:"navigation",opened:e.navigationOpened,onClose:t[1]||(t[1]=t=>e.navigationOpened=!1)},null,8,["opened"]),b("div",rt,[b(r,{class:"header",onOpen:t[2]||(t[2]=t=>e.navigationOpened=!0)}),b(i,{class:"main"}),b(u)])])):y("",!0)}));ot.render=it,ot.__scopeId="data-v-7cbca294";var ut={name:"Home"};const dt=C();p("data-v-48b7a84e");const ct={class:"home"},mt=b("img",{alt:"Greenpress",src:ye},null,-1);g();const pt=dt(((e,t,n,a,o,s)=>(f(),h("div",ct,[mt]))));ut.render=pt,ut.__scopeId="data-v-48b7a84e";var gt={name:"LoginForm",setup(){const{login:e,form:t,isLoggedIn:n}=_e(),a=m(),{submit:o,submitting:s}=Re(e,{error:"Login failed"});return I(n,(e=>e&&a.push({name:"home"}))),{submit:o,form:t,submitting:s,onFocus:()=>{window.scrollTo(0,0),document.body.scrollTop=0}}}};const _t=C();p("data-v-58614869");const vt={dir:"ltr"},ft={dir:"ltr"};g();const ht=_t(((e,t,n,a,o,s)=>{const l=_("el-input"),r=_("el-form-item"),i=_("el-button"),u=_("el-form");return f(),h(u,{class:"login-form",onSubmit:V(a.submit,["prevent"])},{default:_t((()=>[b(r,{label:e.$t("Email")},{default:_t((()=>[b("div",vt,[b(l,{name:"email",modelValue:a.form.email,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.email=e),type:"email",required:"",onFocus:a.onFocus},null,8,["modelValue","onFocus"])])])),_:1},8,["label"]),b(r,{label:e.$t("Password")},{default:_t((()=>[b("div",ft,[b(l,{name:"password",modelValue:a.form.password,"onUpdate:modelValue":t[2]||(t[2]=e=>a.form.password=e),type:"password",required:"",onFocus:a.onFocus},null,8,["modelValue","onFocus"])])])),_:1},8,["label"]),b("div",null,[b(i,{"native-type":"submit",loading:a.submitting},{default:_t((()=>[L(S(e.$t("Login")),1)])),_:1},8,["loading"])])])),_:1},8,["onSubmit"])}));gt.render=ht,gt.__scopeId="data-v-58614869";const bt={name:"Login",components:{LoginForm:gt}},yt=C();p("data-v-f2dec3ea");const Pt={class:"login-page"},Ct=b("img",{alt:"greenpress Admin Panel",src:ye},null,-1);g();const St=yt(((e,t,n,a,o,s)=>{const l=_("LoginForm");return f(),h("div",Pt,[Ct,b("h1",null,S(e.$t("Please login"))+":",1),b(l)])}));function kt(e,t=null){const n=E(t),a=E(!0),o=E(null),s=async()=>{try{n.value=await e()}catch(t){o.value=t}finally{a.value=!1}};return s(),{result:n,loading:a,error:o,retry:s}}bt.render=St,bt.__scopeId="data-v-f2dec3ea";const Et=Oe("/api/menus");function It(e,{text:t="Are you sure?",title:n="",type:a="warning"}={}){return o=>{O.confirm(t,n,{type:a}).then((()=>e(o))).catch((()=>{}))}}const Tt={name:"MenusList",setup:()=>function(){const{result:e}=kt((()=>Et.getAll()),[]),{submit:t}=Re((e=>Et.remove(e)),{error:"Failed to remove menu",success:"Menu removed successfully"});return{menus:e,remove:It(t)}}()},jt=C();p("data-v-46f2cd14");const Lt=b("th",null,null,-1);g();const At=jt(((e,t,n,a,o,s)=>{const l=_("router-link");return f(),h("table",null,[b("thead",null,[b("tr",null,[b("th",null,S(e.$t("Name")),1),Lt])]),b("tbody",null,[(f(!0),h(T,null,j(e.menus,(t=>(f(),h("tr",{key:t},[b("td",null,[b(l,{to:{name:"editMenu",params:{menuName:t}}},{default:jt((()=>[L(S(t),1)])),_:2},1032,["to"])]),b("td",null,[b("a",{onClick:V((n=>e.remove(t)),["prevent"]),class:"el-icon-delete"},null,8,["onClick"])])])))),128))])])}));Tt.render=At,Tt.__scopeId="data-v-46f2cd14";var Vt={name:"ListPageTitle",props:{title:String,createRoute:String}};const Ot=C()(((e,t,n,a,o,s)=>{const l=_("el-button");return f(),h("h1",null,[b("span",null,S(e.$t(n.title)),1),b(l,{type:"primary",icon:"el-icon-edit",onClick:t[1]||(t[1]=t=>e.$router.push({name:n.createRoute}))})])}));Vt.render=Ot,Vt.__scopeId="data-v-15feaf9e";const Dt={name:"Menus",components:{ListPageTitle:Vt,MenusList:Tt}},wt={class:"menus-page"};Dt.render=function(e,t,n,a,o,s){const l=_("ListPageTitle"),r=_("MenusList");return f(),h("div",wt,[b(l,{title:"Menus","create-route":"createMenu"}),b(r)])};const Ut={name:"MenuKindInput",props:{value:String},setup:(e,{emit:t})=>({emitChange(e){t("change",e)}})},Rt=C();p("data-v-09ad9a78");const Ft=L(" Kind: ");g();const $t=Rt(((e,t,n,a,o,s)=>{const l=_("el-option"),r=_("el-select");return f(),h("label",null,[Ft,b(r,{"model-value":n.value,onChange:a.emitChange},{default:Rt((()=>[b(l,{value:"category",label:"Category"}),b(l,{value:"post",label:"Post"}),b(l,{value:"http",label:"HTTP"})])),_:1},8,["model-value","onChange"])])}));let xt;Ut.render=$t,Ut.__scopeId="data-v-09ad9a78";const Nt={},Mt=function(e,t){if(!t)return e();if(void 0===xt){const e=document.createElement("link").relList;xt=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in Nt)return;Nt[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":xt,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e()))};var Kt=JSON.parse('{"appDirection":"ltr","Add new Storage":"Add new Storage","Edit Storage":"Edit Storage","Upload Files to Storage":"Upload Files to Storage","Storage":"Storage","Configurations":"Configurations","Hello {userName}":"Hello <strong>{userName}</strong>","Hello":"Hello","Logout":"Logout","Storage & Assets":"Storage & Assets","Menus":"Menus","Categories":"Categories","Posts":"Posts","Users":"Users","Drafts":"Drafts","Name":"Name","Public":"Public","Description":"Description","Kind":"Kind","Path":"Path","Title":"Title","Category":"Category","category":"Category","post":"Post","Pinned":"Pinned","Email":"Email","Roles":"Roles","Context":"Context","Edit Configuration":"Edit Configuration","app-configuration":"app-configuration","migration":"migration","versions":"versions","name":"name","language":"language","direction":"direction","logoUrl":"logoUrl","upload":"upload","text":"text","description":"description","slogan":"slogan","keywords":"keywords","theme":"theme","SAVE":"SAVE","Edit Menu":"Edit Menu","ADD":"AdD","Create Category":"Create Category","Create Post":"Create Post","Create User":"Create User","Login":"Login","Edit":"Edit","Edit category":"Edit category","Edit Post":"Edit Post","Edit User":"Edit User","Please login":"Please login","Password":"Password","Public URL":"Public URL","Base Storage Path":"Base Storage Path","Authentication Secrets":"Authentication Secrets","Username":"Username","FTP Host":"FTP Host","Bucket Name":"Bucket Name","Select GCS JSON Key":"Select GCS JSON Key","Public Post":"Public Post","Pinned Post":"Pinned Post","Would you like to restore unsaved changes?":"Would you like to restore unsaved changes?","You have unsaved changes":"You have unsaved changes","Cancel":"Cancel","OK":"OK","Tags":"Tags","leave empty to auto-generate":"Leave empty to auto-generate"}'),Ht=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Kt});const Bt=D({legacy:!1,globalInjection:!0,locale:"en",warnHtmlInMessage:!1,silentTranslationWarn:!0,missing:(e,t)=>t,messages:{en:Kt}}),zt=[],Wt=e=>(Bt.global.locale.value=e,e),Gt=(e="en")=>Bt.global.locale.value===e||zt.includes(e)?Promise.resolve(Wt(e)):function(e){switch(e){case"../i18n/en.json":return Mt((()=>Promise.resolve().then((function(){return Ht}))),void 0);case"../i18n/he.json":return Mt((()=>import("./he.7b7e7b23.js")),void 0);default:return Promise.reject(new Error("Unknown variable dynamic import: "+e))}}(`../i18n/${e}.json`).then((t=>(Bt.global.setLocaleMessage(e,t.default),zt.push(e),Wt(e)))),qt=e=>Bt.global.t(e)||e;function Jt(e,t){return de.delete("/api/drafts",{params:{contextType:e,contextId:t}})}async function Yt(e,t,n){let a;try{a=await function(e,t){return de.get("/api/drafts",{params:{contextType:e,contextId:t}}).then(ce)}(e,t)}catch(o){return}if(null==a?void 0:a.contextData)try{await O.confirm(qt("Would you like to restore unsaved changes?"),qt("You have unsaved changes"),{type:"info",cancelButtonText:qt("Cancel"),confirmButtonText:qt("OK")}),Object.assign(n,a.contextData)}catch(s){Zt(e,t)}}const Qt=w((function({contextType:e,contextId:t,contextData:n,contextDisplayName:a,contextRouteParams:o}){var s;s={contextType:e,contextId:t,contextData:n,contextDisplayName:a,contextRouteParams:o},de.put("/api/drafts",s).then(ce)}),3e3);function Xt(e,t=null,n,a){const o=U();return Yt(e,t,a),I((()=>[...Object.values(a),n.value]),(()=>{Qt({contextType:e,contextId:t,contextData:a,contextDisplayName:n.value,contextRouteParams:o.params})}),{lazy:!0}),{saveChanges:n=>{Qt(e,t,n||a)}}}function Zt(e,t=null){Jt(e,t)}const en=Oe("/api/posts");function tn(e){const t=E(null);return function(e){return en.getOne(e)}(e).then((e=>{t.value=e})),i(r({},Re((e=>en.update(t.value._id,e).then((e=>{e.value=e,Zt("post",e._id)}))),{success:"Post updated successfully",error:"Failed to update post"})),{post:t})}function nn(){const e=E([]);return en.getAll({populate:["category"]}).then((t=>e.value=t)),{posts:e,remove:t=>en.remove(t).then((()=>e.value=e.value.filter((({_id:e})=>e!==t))))}}const an={name:"PostSelector",props:{value:String,title:String},setup(e,{emit:t}){const{searchPostsList:n,selectedPost:a,search:o}=function(){const e=E([]),t=d({title:"",value:""});return{search:w((function(){return en.getAll({populate:["category"],lean:!0,q:t.title}).then((t=>e.value=t))}),500),selectedPost:t,searchPostsList:e}}();return{val:c({get:()=>a.title||e.title,set:e=>{a.title=e}}),onInput(e){e.length>2&&o(e)},searchPostsList:n,select(e){a.title=e.title,a.value=e._id,n.value=[],t("change",e._id)}}}},on=C();p("data-v-771d75f3");const sn={class:"post-selector"},ln=L(" Search Post by Title: "),rn={key:0,class:"options-list"};g();const un=on(((e,t,n,a,o,s)=>{const l=_("el-input");return f(),h("label",sn,[ln,b(l,{modelValue:a.val,"onUpdate:modelValue":t[1]||(t[1]=e=>a.val=e),onInput:a.onInput,name:"post-title"},null,8,["modelValue","onInput"]),a.searchPostsList.length?(f(),h("ul",rn,[(f(!0),h(T,null,j(a.searchPostsList,(e=>(f(),h("li",{key:e._id,onClick:t=>a.select(e)},S(e.title),9,["onClick"])))),128))])):y("",!0)])}));an.render=un,an.__scopeId="data-v-771d75f3";const dn={name:"PostSelector",props:{value:{type:Object,default:()=>({})}},setup:(e,{emit:t})=>({emitChange(n,a){t("change",i(r({},e.value),{[n]:a}))}})},cn=C();p("data-v-68132ebc");const mn=L(" Text: "),pn=L(" URL: "),gn=L(" Open in new window ");g();const _n=cn(((e,t,n,a,o,s)=>{const l=_("el-input"),r=_("el-checkbox");return f(),h("div",null,[b("label",null,[mn,b(l,{"model-value":n.value.text,onInput:t[1]||(t[1]=e=>a.emitChange("text",e))},null,8,["model-value"])]),b("label",null,[pn,b(l,{"model-value":n.value.url,onInput:t[2]||(t[2]=e=>a.emitChange("url",e))},null,8,["model-value"])]),b("label",null,[b(r,{checked:n.value.newWindow,onInput:t[3]||(t[3]=e=>a.emitChange("newWindow",e))},null,8,["checked"]),gn])])}));dn.render=_n,dn.__scopeId="data-v-68132ebc";const vn=Oe("/api/categories");function fn(e){return i(r({},e),{homePage:!0,name:"Home Page"})}const hn=d({loaded:!1,loading:!1,categories:[]});async function bn(){if(!hn.loaded&&!hn.loading){hn.loading=!0,hn.loaded=!1;try{let e=await vn.getAll();const t=e.find((e=>"-"===e.path));hn.categories=[fn(t),...e.filter((e=>e!==t))],hn.loaded=!0}catch(e){hn.loaded=!1}finally{hn.loading=!1}}}function yn(){return c((()=>hn.categories))}function Pn(e){return vn.create(e).then((e=>(function(e){"-"===e.path?hn.categories.unshift(fn(e)):hn.categories.push(e)}(e),e)))}function Cn(){bn();const{submit:e}=Re((({path:e})=>vn.remove(encodeURIComponent(e)).then((()=>async function(e){hn.categories=hn.categories.filter((t=>t.path!==e))}(e)))),{success:"Category removed successfully",error:"Failed to remove category"});return{categories:yn(),removeCategory:e}}const Sn={name:"CategorySelector",props:{value:String,prop:{type:String,default:"path"}},setup(e,{emit:t}){const{mounted:n,categories:a}=(bn(),{mounted:c((()=>hn.loaded)),categories:yn()}),o=c({get:()=>e.value||(a.value.length?a.value[0][e.prop]:null),set(e){t("change",e)}});return I(n,(()=>t("mounted",e.value||a[0]&&a[0][e.prop]))),{model:o,categories:a}}};Sn.render=function(e,t,n,a,o,s){const l=_("el-option"),r=_("el-select");return f(),h(r,{modelValue:a.model,"onUpdate:modelValue":t[1]||(t[1]=e=>a.model=e)},{default:F((()=>[(f(!0),h(T,null,j(a.categories,(e=>(f(),h(l,{key:e._id,value:e[n.prop],label:e.name},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])};const kn={components:{CategorySelector:Sn,MenuHttpInput:dn,PostSelector:an,MenuKindInput:Ut},props:{value:Object},setup(e,{emit:t}){function n(n){t("change",r(r({},e.value),n))}return{categoryValue:c((()=>{var t;return e.value.value||(null==(t=e.value.category)?void 0:t._id)||e.value.category})),changeKind(e){let t;switch(e){case"category":case"post":t="";break;case"http":t={}}n({kind:e,value:t})},changeValue:e=>n({value:e})}}},En=C();p("data-v-c936650c");const In={class:"menu-link-input"};g();const Tn=En(((e,t,n,a,o,s)=>{const l=_("MenuKindInput"),r=_("CategorySelector"),i=_("PostSelector"),u=_("MenuHttpInput");return f(),h("div",In,[b(l,{value:n.value.kind,onChange:a.changeKind},null,8,["value","onChange"]),b("div",null,["category"===n.value.kind?(f(),h(r,{key:0,prop:"_id",value:a.categoryValue,onChange:a.changeValue},null,8,["value","onChange"])):"post"===n.value.kind?(f(),h(i,{key:1,value:n.value.value||n.value.post&&n.value.post._id,title:n.value.post?n.value.post.title:null,onChange:a.changeValue},null,8,["value","title","onChange"])):"http"===n.value.kind?(f(),h(u,{key:2,value:n.value.value,onChange:a.changeValue},null,8,["value","onChange"])):y("",!0)]),b("i",{onClick:t[1]||(t[1]=t=>e.$emit("remove",n.value)),class:"el-icon-delete"})])}));kn.render=Tn,kn.__scopeId="data-v-c936650c";const jn={name:"MenuEditor",components:{MenuLinkInput:kn},props:{menu:String},setup:e=>function(e){const{result:t}=kt((()=>Et.getOne(e)),{}),n=d({links:[],dirty:!1}),a=c((()=>n.dirty?n.links:t.value.links||[]));return{links:a,updateLink:e=>{n.links=[...a.value.map((t=>t._id===e._id?e:t))],n.dirty=!0},removeLink:e=>{n.links=[...a.value.filter((t=>t!==e))],n.dirty=!0},addLink:()=>{n.links=[...a.value,{kind:"category"}],n.dirty=!0},updateMenu:Re((()=>Et.update(e,i(r({},t.value),{links:a.value}))),{success:"Menu updated successfully",error:"Failed to update menu"}).submit}}(e.menu)};jn.render=function(e,t,n,a,o,s){const l=_("el-button"),r=_("MenuLinkInput"),i=_("el-form");return f(),h(i,{onSubmit:V(e.updateMenu,["prevent"])},{default:F((()=>[b(l,{onClick:e.addLink,"native-type":"button"},{default:F((()=>[L(S(e.$t("ADD")),1)])),_:1},8,["onClick"]),(f(!0),h(T,null,j(e.links,((t,n)=>(f(),h(r,{value:t,key:n,onRemove:e.removeLink,onChange:e.updateLink},null,8,["value","onRemove","onChange"])))),128)),b(l,{"native-type":"submit"},{default:F((()=>[L(S(e.$t("SAVE")),1)])),_:1})])),_:1},8,["onSubmit"])};const Ln={name:"PageTitle",props:{title:String,itemName:String}},An=C();p("data-v-5397fc2c");const Vn=L(": ");g();const On=An(((e,t,n,a,o,s)=>(f(),h("h1",null,[L(S(e.$t(n.title)),1),n.itemName?(f(),h(T,{key:0},[Vn,b("i",null,S(n.itemName),1)],64)):y("",!0)]))));Ln.render=On,Ln.__scopeId="data-v-5397fc2c";const Dn={name:"EditMenu",components:{PageTitle:Ln,MenuEditor:jn}},wn={class:"category-page"};Dn.render=function(e,t,n,a,o,s){const l=_("PageTitle"),r=_("MenuEditor");return f(),h("div",wn,[b(l,{title:"Edit Menu","item-name":e.$route.params.menuName},null,8,["item-name"]),b(r,{menu:e.$route.params.menuName},null,8,["menu"])])};const Un={};Un.render=function(e,t){const n=_("router-view");return f(),h(n)};const Rn={path:"menus",redirect:{name:"menus"},component:Un,children:[{path:"",name:"menus",component:Dt},{path:"new",name:"createMenu",component:Dn},{path:":menuName",name:"editMenu",component:Dn}]};const Fn={name:"CreateHomePage",setup(){const e=m();return{create:async()=>{await Pn({path:"-"}),e.push({name:"editCategory",params:{categoryPath:"-",content:"<p>Welcome to my website!</p>"}})}}}},$n=C();p("data-v-7ccc40da");const xn=L("It seems like you don't have an home page. "),Nn=L("!");g();const Mn=$n(((e,t,n,a,o,s)=>(f(),h("p",null,[xn,b("a",{onClick:t[1]||(t[1]=(...e)=>a.create&&a.create(...e))},"Click here to create your home page"),Nn]))));Fn.render=Mn,Fn.__scopeId="data-v-7ccc40da";const Kn={name:"CategoriesList",components:{CreateHomePage:Fn},setup(){const{categories:e,removeCategory:t}=Cn();return{categories:e,askBeforeRemove:It(t),noHomePage:c((()=>!e.value.some((e=>"-"===e.path))))}}},Hn=C();p("data-v-ead58ef2");const Bn=b("th",null,null,-1),zn={key:0,class:"el-icon-check"};g();const Wn=Hn(((e,t,n,a,o,s)=>{const l=_("CreateHomePage"),r=_("router-link");return f(),h("div",null,[a.noHomePage?(f(),h(l,{key:0})):y("",!0),b("table",null,[b("thead",null,[b("tr",null,[b("th",null,S(e.$t("Name")),1),b("th",null,S(e.$t("Public")),1),b("th",null,S(e.$t("Path")),1),Bn])]),b("tbody",null,[(f(!0),h(T,null,j(a.categories,(e=>(f(),h("tr",{key:e._id},[b("td",null,[b(r,{to:{name:"editCategory",params:{categoryPath:e.path}}},{default:Hn((()=>[L(S(e.name),1)])),_:2},1032,["to"])]),b("td",null,[e.isPublic?(f(),h("i",zn)):y("",!0)]),b("td",null,S(e.path),1),b("td",null,[e.homePage?y("",!0):(f(),h("a",{key:0,onClick:V((t=>a.askBeforeRemove(e)),["prevent"]),class:"el-icon-delete"},null,8,["onClick"]))])])))),128))])])])}));Kn.render=Wn,Kn.__scopeId="data-v-ead58ef2";var Gn={name:"Categories",components:{ListPageTitle:Vt,CategoriesList:Kn}};const qn={class:"categories-page"};Gn.render=function(e,t,n,a,o,s){const l=_("ListPageTitle"),r=_("CategoriesList");return f(),h("div",qn,[b(l,{title:"Categories","create-route":"createCategory"}),b(r)])};const Jn={name:"AssetUploader",components:{BasicFileUploader:Ke,AssetsStorageSelector:$e},setup:(e,{emit:t})=>({selectedStorage:E(null),uploadComplete({publicUrl:e}){t("change",e)}})};Jn.render=function(e,t,n,a,o,s){const l=_("AssetsStorageSelector"),r=_("BasicFileUploader");return f(),h("div",null,[b(l,{onChange:t[1]||(t[1]=e=>a.selectedStorage=e._id)}),a.selectedStorage?(f(),h(r,{key:0,storage:a.selectedStorage,onUpload:a.uploadComplete},null,8,["storage","onUpload"])):y("",!0)])};const Yn={name:"FormInput",components:{AssetUploader:Jn},props:{title:String,label:String,type:String,modelValue:[String,Number,Object]},emits:["input","change","update:modelValue"],setup:(e,{emit:t})=>({listeners:{input:e=>{t("input",e),t("update:modelValue",e)},change:e=>t("chang",e)}})},Qn=C();p("data-v-98e5094e");const Xn={key:0};g();const Zn=Qn(((e,t,n,a,o,s)=>{const l=_("el-input-number"),r=_("AssetUploader"),i=_("el-input"),u=_("el-form-item");return f(),h("div",null,[b(u,{label:n.title?e.$t(n.title):null},{default:Qn((()=>[n.label?(f(),h("small",Xn," ("+S(e.$t(n.label))+")",1)):y("",!0),"number"===n.type?(f(),h(l,$({key:1},x(a.listeners),{"model-value":n.modelValue}),null,16,["model-value"])):"upload"===n.type?(f(),h(r,$({key:2},x(a.listeners),{value:n.modelValue,class:"asset-upload"}),null,16,["value"])):(f(),h(i,$({key:3},x(a.listeners),{"model-value":n.modelValue,"native-type":n.type,type:n.type}),null,16,["model-value","native-type","type"]))])),_:1},8,["label"]),N(e.$slots,"default",{},void 0,!0)])}));function ea(e){return Object.keys(e).reduce(((t,n)=>{const a=e[n];return null!==a&&(t[n]=a),t}),{})}Yn.render=Zn,Yn.__scopeId="data-v-98e5094e";const ta=Oe("/api/configurations"),na=d({loaded:!1,data:null,promise:null});function aa(){return function(){if(na.loaded||na.promise)return;na.promise=ta.getOne("app-configuration").then((e=>na.data=e)).catch((()=>({})))}(),c((()=>na.data))}function oa(){const e=aa(),t=E({}),n=c((()=>e.value&&e.value.metadata.language||"en"));return I(n,(async e=>{await function(e){switch(e){case"../../../../node_modules/@greenpress/gp-editor/translations/af.js":return Mt((()=>import("./af.fcf6b5a6.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/ar.js":return Mt((()=>import("./ar.8d13cff7.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/ast.js":return Mt((()=>import("./ast.9ac0e212.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/az.js":return Mt((()=>import("./az.42fb8912.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/bg.js":return Mt((()=>import("./bg.0a3f92b5.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/ca.js":return Mt((()=>import("./ca.981b1c92.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/cs.js":return Mt((()=>import("./cs.d40b416b.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/da.js":return Mt((()=>import("./da.3b21f12f.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/de-ch.js":return Mt((()=>import("./de-ch.90242adb.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/de.js":return Mt((()=>import("./de.d3da1842.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/el.js":return Mt((()=>import("./el.d5faa02a.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/en-au.js":return Mt((()=>import("./en-au.8aeaa032.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/en-gb.js":return Mt((()=>import("./en-gb.f1d7ce9d.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/eo.js":return Mt((()=>import("./eo.2d006199.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/es.js":return Mt((()=>import("./es.d5580502.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/et.js":return Mt((()=>import("./et.ce589f8f.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/eu.js":return Mt((()=>import("./eu.2fe482a7.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/fa.js":return Mt((()=>import("./fa.d4022a59.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/fi.js":return Mt((()=>import("./fi.f0eaeacd.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/fr.js":return Mt((()=>import("./fr.d2826432.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/gl.js":return Mt((()=>import("./gl.01b4b30f.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/gu.js":return Mt((()=>import("./gu.9e860dfc.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/he.js":return Mt((()=>import("./he.15a23e2f.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/hi.js":return Mt((()=>import("./hi.8cf4fb64.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/hr.js":return Mt((()=>import("./hr.eafa5aa4.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/hu.js":return Mt((()=>import("./hu.54c2d17f.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/id.js":return Mt((()=>import("./id.5c9890fc.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/it.js":return Mt((()=>import("./it.ac44f869.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/ja.js":return Mt((()=>import("./ja.5167a74e.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/kk.js":return Mt((()=>import("./kk.c7107bcd.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/km.js":return Mt((()=>import("./km.b0066701.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/kn.js":return Mt((()=>import("./kn.8f15477b.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/ko.js":return Mt((()=>import("./ko.09f5a298.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/ku.js":return Mt((()=>import("./ku.235c9fef.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/lt.js":return Mt((()=>import("./lt.512ee7c9.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/lv.js":return Mt((()=>import("./lv.05185fea.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/ms.js":return Mt((()=>import("./ms.1439e809.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/nb.js":return Mt((()=>import("./nb.87765990.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/ne.js":return Mt((()=>import("./ne.ed476650.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/nl.js":return Mt((()=>import("./nl.5567edee.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/no.js":return Mt((()=>import("./no.d21775eb.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/oc.js":return Mt((()=>import("./oc.369b9493.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/pl.js":return Mt((()=>import("./pl.6c12cf90.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/pt-br.js":return Mt((()=>import("./pt-br.37d3a9b6.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/pt.js":return Mt((()=>import("./pt.faff9ea3.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/ro.js":return Mt((()=>import("./ro.17dd478d.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/ru.js":return Mt((()=>import("./ru.53c0cf03.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/si.js":return Mt((()=>import("./si.05d81821.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/sk.js":return Mt((()=>import("./sk.694df051.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/sl.js":return Mt((()=>import("./sl.fa408f7c.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/sq.js":return Mt((()=>import("./sq.55b5fbcb.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/sr-latn.js":return Mt((()=>import("./sr-latn.afceedba.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/sr.js":return Mt((()=>import("./sr.7d2fd2f9.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/sv.js":return Mt((()=>import("./sv.f814bb66.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/th.js":return Mt((()=>import("./th.5ec0898a.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/tk.js":return Mt((()=>import("./tk.7ec4e3dd.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/tr.js":return Mt((()=>import("./tr.57d21e15.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/tt.js":return Mt((()=>import("./tt.5b33107e.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/ug.js":return Mt((()=>import("./ug.f3a533c5.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/uk.js":return Mt((()=>import("./uk.9841f5a7.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/vi.js":return Mt((()=>import("./vi.3b490f94.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/zh-cn.js":return Mt((()=>import("./zh-cn.6de666b2.js")),void 0);case"../../../../node_modules/@greenpress/gp-editor/translations/zh.js":return Mt((()=>import("./zh.ba2fb64c.js")),void 0);default:return Promise.reject(new Error("Unknown variable dynamic import: "+e))}}(`../../../../node_modules/@greenpress/gp-editor/translations/${e}.js`).catch((()=>{})),t.value={language:e}}),{immediate:!0}),{editorConfig:t}}const sa={name:"CategoryForm",components:{FormInput:Yn},props:{isHomePage:Boolean,category:Object,submitting:Boolean},setup(e,{emit:t}){const n=function(e){const t=d({name:null,path:null,content:null,isPublic:null});R((()=>{e.category._id||(t.isPublic=!0)}));const n=c((()=>null===t.name?e.category.name:t.name)),a=c((()=>null===t.path?e.category.path:t.path)),o=c((()=>null===t.content?e.category.content:t.content)),s=c((()=>null===t.isPublic?e.category.isPublic:t.isPublic));return{editedCategory:t,name:n,path:a,content:o,isPublic:s}}(e);return Xt("category",e.category._id,c((()=>e.category.name)),n.editedCategory),i(r(r({},n),oa()),{submit:()=>t("submitted",ea(n.editedCategory))})}};sa.render=function(e,t,n,a,o,s){const l=_("el-checkbox"),r=_("FormInput"),i=_("gp-editor"),u=_("el-form-item"),d=_("el-button"),c=_("el-form");return f(),h(c,{class:"category-form",onSubmit:V(a.submit,["prevent"])},{default:F((()=>[n.isHomePage?y("",!0):(f(),h(T,{key:0},[b("div",null,[b(l,{label:"Public?",size:"small","model-value":e.isPublic,onChange:t[1]||(t[1]=t=>e.editedCategory.isPublic=t)},null,8,["model-value"])]),b(r,{title:"Name","model-value":e.name,onInput:t[2]||(t[2]=t=>e.editedCategory.name=t)},null,8,["model-value"]),b(r,{title:"Path",label:"leave empty to auto-generate","model-value":e.path,onInput:t[3]||(t[3]=t=>e.editedCategory.path=t)},null,8,["model-value"])],64)),b(u,{label:"Content",class:"form-item-flex"},{default:F((()=>[b("div",null,[b(i,{"model-value":e.content,onInput:t[4]||(t[4]=t=>e.editedCategory.content=t),config:e.editorConfig},null,8,["model-value","config"])])])),_:1}),b(d,{"native-type":"submit",loading:n.submitting},{default:F((()=>[L(S(e.$t("SAVE")),1)])),_:1},8,["loading"])])),_:1},8,["onSubmit"])};const la={name:"EditCategory",components:{PageTitle:Ln,CategoryForm:sa},setup(){const{params:e}=U(),{category:t,updateCategory:n,submitting:a}=function(e){const{result:t}=kt((()=>vn.getOne(e).then((t=>"-"===e?fn(t):t)))),{submit:n,submitting:a}=Re((n=>vn.update(e,n).then((()=>{Zt("category",t.value._id)}))),{success:"Category updated successfully",error:"Failed to update category"});return{category:t,updateCategory:n,submitting:a}}(e.categoryPath),o=c((()=>!!t.value.homePage));return{isHomePage:o,title:c((()=>o.value?"Edit":"Edit category")),category:t,updateCategory:n,submitting:a}}},ra={key:0,class:"category-page"};la.render=function(e,t,n,a,o,s){const l=_("PageTitle"),r=_("CategoryForm");return a.category?(f(),h("div",ra,[b(l,{title:a.title,"item-name":a.category.name},null,8,["title","item-name"]),b(r,{"is-home-page":a.isHomePage,category:a.category,submitting:a.submitting,onSubmitted:a.updateCategory},null,8,["is-home-page","category","submitting","onSubmitted"])])):y("",!0)};const ia=A({name:"CreateCategory",components:{PageTitle:Ln,CategoryForm:sa},setup(){const e=useRouter();return{submit:async function(t){const{path:n}=await Pn(t);Zt("category"),e.push({name:"editCategory",params:{categoryPath:n}})}}}}),ua={class:"category-page"};ia.render=function(e,t,n,a,o,s){const l=_("PageTitle"),r=_("CategoryForm");return f(),h("div",ua,[b(l,{title:"Create Category"}),b(r,{category:{},onSubmitted:e.submit},null,8,["onSubmitted"])])};const da={path:"categories",redirect:{name:"categories"},component:Un,children:[{path:"",name:"categories",component:Gn},{path:"new",name:"createCategory",component:ia},{path:":categoryPath",name:"editCategory",component:la}]};var ca={name:"AssetsStorageList",setup(){const{items:e,remove:t}=Fe();return{items:e,remove:It(t)}}};const ma=b("th",null,null,-1);ca.render=function(e,t,n,a,o,s){const l=_("router-link");return f(),h("div",null,[b("table",null,[b("thead",null,[b("tr",null,[b("th",null,S(e.$t("Name")),1),b("th",null,S(e.$t("Kind")),1),ma])]),b("tbody",null,[(f(!0),h(T,null,j(a.items,(e=>(f(),h("tr",{key:e._id},[b("td",null,[b(l,{to:{name:"editStorage",params:{storageId:e._id}}},{default:F((()=>[L(S(e.name),1)])),_:2},1032,["to"])]),b("td",null,S(e.kind),1),b("td",null,[b("a",{onClick:V((t=>a.remove(e)),["prevent"]),class:"el-icon-delete"},null,8,["onClick"])])])))),128))])])])};var pa={name:"StorageList",components:{ListPageTitle:Vt,AssetsStorageList:ca}};const ga=C();p("data-v-1f55bbec");const _a={class:"storage-page"};g();const va=ga(((e,t,n,a,o,s)=>{const l=_("ListPageTitle"),r=_("AssetsStorageList");return f(),h("div",_a,[b(l,{title:"Storage","create-route":"addStorage"}),b(r)])}));pa.render=va,pa.__scopeId="data-v-1f55bbec";const fa={name:"StorageFtpAuth",props:{value:Object},components:{FormInput:Yn},setup(e,{emit:t}){const n=d({host:"",username:"",password:""});return e.value&&(n.host=e.value.host,n.username=e.value.username,n.password=e.value.password),M((()=>t("change",n))),{form:n}}};fa.render=function(e,t,n,a,o,s){const l=_("FormInput");return f(),h("div",null,[b(l,{title:"FTP Host",modelValue:a.form.host,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.host=e)},null,8,["modelValue"]),b(l,{title:"Username",modelValue:a.form.username,"onUpdate:modelValue":t[2]||(t[2]=e=>a.form.username=e)},null,8,["modelValue"]),b(l,{title:"Password",type:"password",modelValue:a.form.password,"onUpdate:modelValue":t[3]||(t[3]=e=>a.form.password=e)},null,8,["modelValue"])])};var ha={name:"StorageGcsAuth",components:{FormInput:Yn},setup(e,{emit:t}){const n=d({projectId:"",clientEmail:"",privateKey:""});return M((()=>t("change",n))),{form:n,file:E(null),async setFileData(e){if(e.target.files&&e.target.files[0]){const{project_id:a,private_key:o,client_email:s}=JSON.parse(await(t=e.target.files[0],new Promise(((e,n)=>{const a=new FileReader;a.readAsText(t,"UTF-8"),a.onload=function(t){e(null==t?void 0:t.target.result)},a.onerror=function(){n(new Error("error reading file"))}}))));n.projectId=a,n.privateKey=o,n.clientEmail=s}var t}}}};ha.render=function(e,t,n,a,o,s){const l=_("FormInput");return f(),h("div",null,[b(l,{title:"Select GCS JSON Key",type:"file",modelValue:a.file,"onUpdate:modelValue":t[1]||(t[1]=e=>a.file=e),onChange:a.setFileData},null,8,["modelValue","onChange"])])};const ba={name:"StorageS3Auth",props:{value:Object},components:{FormInput:Yn},setup(e,{emit:t}){const n=d({accessKey:"",secretKey:""});return e.value&&(n.accessKey=e.value.accessKey,n.secretKey=e.value.secretKey),M((()=>t("change",n))),{form:n}}};ba.render=function(e,t,n,a,o,s){const l=_("FormInput");return f(),h("div",null,[b(l,{title:"Access Key",modelValue:a.form.accessKey,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.accessKey=e)},null,8,["modelValue"]),b(l,{title:"Secret Key",modelValue:a.form.secretKey,"onUpdate:modelValue":t[2]||(t[2]=e=>a.form.secretKey=e)},null,8,["modelValue"])])};const ya={name:"StorageForm",components:{FormInput:Yn,StorageFtpAuth:fa,StorageGcsAuth:ha,StorageS3Auth:ba},props:{value:Object,submitting:Boolean},setup(e,{emit:t}){const n=function(e){return{editedStorage:d(i(r({},e.value||{name:"New Storage",kind:"ftp"}),{authentication:null,metadata:r({publicUrl:"",basePath:"/",bucketName:""},e.value?e.value.metadata:{})})),showAuth:E(!e.value)}}(e);return i(r({},n),{submit:()=>t("submitted",n.editedStorage)})}},Pa=C();p("data-v-6a068e76");const Ca={class:"authentication"};g();const Sa=Pa(((e,t,n,a,o,s)=>{const l=_("FormInput"),r=_("el-option"),i=_("el-select"),u=_("StorageFtpAuth"),d=_("StorageGcsAuth"),c=_("StorageS3Auth"),m=_("el-button"),p=_("el-form");return f(),h(p,{class:"storage-form",onSubmit:V(a.submit,["prevent"])},{default:Pa((()=>[b(l,{title:"Name","model-value":e.editedStorage.name,onInput:t[1]||(t[1]=t=>e.editedStorage.name=t)},null,8,["model-value"]),b(l,{title:"Public URL","model-value":e.editedStorage.metadata.publicUrl,onInput:t[2]||(t[2]=t=>e.editedStorage.metadata.publicUrl=t)},null,8,["model-value"]),b(l,{title:"Base Storage Path","model-value":e.editedStorage.metadata.basePath,onInput:t[3]||(t[3]=t=>e.editedStorage.metadata.basePath=t)},null,8,["model-value"]),b("p",null,[b("label",null,[L(S(e.$t("Kind"))+": ",1),b(i,{"model-value":e.editedStorage.kind,onChange:t[4]||(t[4]=t=>e.editedStorage.kind=t)},{default:Pa((()=>[b(r,{value:"s3",label:"Amazon S3"}),b(r,{value:"gcs",label:"Google Cloud"}),b(r,{value:"ftp",label:"FTP"})])),_:1},8,["model-value"])])]),"ftp"!==e.editedStorage.kind?(f(),h(l,{key:0,title:"Bucket Name","model-value":e.editedStorage.metadata.bucketName,onInput:t[5]||(t[5]=t=>e.editedStorage.metadata.bucketName=t)},null,8,["model-value"])):y("",!0),b("div",Ca,[b("h3",{onClick:t[6]||(t[6]=t=>e.showAuth=!e.showAuth)},[b("i",{class:e.showAuth?"el-icon-arrow-down":"el-icon-arrow-right"},null,2),L(" "+S(e.$t("Authentication Secrets")),1)]),e.showAuth?(f(),h(T,{key:0},["ftp"===e.editedStorage.kind?(f(),h(u,{key:0,"model-value":e.editedStorage.authentication,onChange:t[7]||(t[7]=t=>e.editedStorage.authentication=t)},null,8,["model-value"])):"gcs"===e.editedStorage.kind?(f(),h(d,{key:1,"model-value":e.editedStorage.authentication,onChange:t[8]||(t[8]=t=>e.editedStorage.authentication=t)},null,8,["model-value"])):"s3"===e.editedStorage.kind?(f(),h(c,{key:2,"model-value":e.editedStorage.authentication,onChange:t[9]||(t[9]=t=>e.editedStorage.authentication=t)},null,8,["model-value"])):y("",!0)],64)):y("",!0)]),b(m,{"native-type":"submit",loading:n.submitting},{default:Pa((()=>[L(S(e.$t("SAVE")),1)])),_:1},8,["loading"])])),_:1},8,["onSubmit"])}));ya.render=Sa,ya.__scopeId="data-v-6a068e76";var ka={name:"AddStorage",components:{PageTitle:Ln,StorageForm:ya},setup(){const e=m(),{submitting:t,submit:n}=Re((async function(t){const n=await async function(e){const t=await De.create(e);return we.storages.push(t),t}(t);e.push({name:"editStorage",params:{storageId:n._id}})}),{success:"Storage created successfully",error:"Failed to create storage"});return{submitting:t,submit:n}}};const Ea={class:"add-storage-page"};ka.render=function(e,t,n,a,o,s){const l=_("PageTitle"),r=_("StorageForm");return f(),h("div",Ea,[b(l,{title:"Add new Storage"}),b(r,{onSubmitted:a.submit,submitting:a.submitting},null,8,["onSubmitted","submitting"])])};var Ia={name:"EditStorage",components:{BasicFileUploader:Ke,PageTitle:Ln,StorageForm:ya},setup(){const{params:e}=U(),{data:t}=function(e){const t=d({loading:!0,storage:{}});return De.getOne(e).then((e=>{t.storage=e,t.loading=!1})),{data:t}}(e.storageId),{submitting:n,submit:a}=Re((function(e){const{_id:n,name:a,kind:o}=t.storage;return async function(e){const t=await De.update(e._id,e);return we.storages=we.storages.map((n=>n._id===e._id?t:n)),t}(r({_id:n,name:a,kind:o},e)).then((e=>Object.assign(t.storage,e)))}),{success:"Storage updated successfully",error:"Failed to update storage"});return{routeParams:e,data:t,submitting:n,submit:a}}};const Ta=C();p("data-v-6e4bb761");const ja={class:"add-storage-page"};g();const La=Ta(((e,t,n,a,o,s)=>{const l=_("PageTitle"),r=_("StorageForm"),i=_("BasicFileUploader");return f(),h("div",ja,[b(l,{title:"Edit Storage","item-name":a.data.storage.name},null,8,["item-name"]),a.data.loading?y("",!0):(f(),h(r,{key:0,submitting:a.submitting,value:a.data.storage,onSubmitted:a.submit},null,8,["submitting","value","onSubmitted"])),b("h3",null,S(e.$t("Upload Files to Storage"))+":",1),b(i,{storage:a.routeParams.storageId},null,8,["storage"])])}));Ia.render=La,Ia.__scopeId="data-v-6e4bb761";const Aa={path:"assets",redirect:{name:"storageList"},component:Un,children:[{path:"",name:"storageList",component:pa},{path:"new",name:"addStorage",component:ka},{path:":storageId",name:"editStorage",component:Ia}]};const Va={name:"PostContentEditor",props:{value:String,state:String},setup:(e,{emit:t})=>i(r({},oa()),{iFrameSrc:c((()=>"data:text/html, "+e.value)),changeType:e=>t("typeChange",e),changeContent:e=>t("contentChange",e),removeContent:()=>t("remove",e.value)})},Oa=C();p("data-v-27be06e9");const Da={class:"content-editor"},wa={class:"content-options"};g();const Ua=Oa(((e,t,n,a,o,s)=>{const l=_("el-option"),r=_("el-select"),i=_("el-button"),u=_("gp-editor");return f(),h("div",Da,[b("div",wa,[b(r,{class:"change-type","model-value":n.state,onChange:a.changeType,size:"mini"},{default:Oa((()=>[b(l,{value:"editor",label:"Content Editor"}),b(l,{value:"html",label:"HTML Editor"}),b(l,{value:"view",label:"View"})])),_:1},8,["model-value","onChange"]),b(i,{type:"danger","native-type":"button",size:"mini",icon:"el-icon-delete",onClick:a.removeContent},null,8,["onClick"])]),b("div",null,["editor"===n.state?(f(),h(u,{key:0,"model-value":n.value,onInput:a.changeContent,config:e.editorConfig},null,8,["model-value","onInput","config"])):"html"===n.state?(f(),h("textarea",{key:1,value:n.value,onInput:t[1]||(t[1]=e=>a.changeContent(e.target.value))},null,40,["value"])):"view"===n.state?(f(),h("iframe",{key:2,src:a.iFrameSrc},null,8,["src"])):y("",!0)])])}));var Ra,Fa;function $a(e,t,n=[]){return n.reduce(((n,a)=>(n[a]=c((()=>null===e[a]?t[a]:e[a])),n)),{})}Va.render=Ua,Va.__scopeId="data-v-27be06e9",(Fa=Ra||(Ra={})).EDITOR="editor",Fa.HTML="html";const xa={components:{AssetUploader:Jn,PostContentEditor:Va,CategorySelector:Sn,FormInput:Yn},props:{post:Object,submitting:Boolean},emits:["submit"],setup(e,{emit:t}){const n=d({title:null,authors:null,thumbnail:null,short:null,contents:null,editorContentsStates:null,path:null,tags:null,category:null,isPublic:null,isPinned:null}),a=function(e,t){const n=E(""),a=c((()=>{const n=e.tags,a=t.tags;return n||a||[]}));return{currentTagText:n,tags:a,addTag:function(t){t.preventDefault(),a.value.includes(t.target.value)||(e.tags=[...a.value,t.target.value],n.value="")},removeTag:function(t){e.tags=a.value.filter((e=>e!==t))}}}(n,e.post),o=function(e,t){const n=c((()=>null===e.editorContentsStates?t.editorContentsStates||[Ra.EDITOR]:e.editorContentsStates));function a(){return{contents:e.contents||t.contents,editorContentsStates:n.value}}const o=c((()=>{const a=n.value;return((null===e.contents?t.contents:e.contents)||[null]).map(((e,t)=>({content:e,index:t,state:a[t]||Ra.EDITOR})))}));return{editorContentsStates:n,contents:o,setContent:function(n,a){e.contents=null!==e.contents?[...e.contents]:[...t.contents||[]],e.contents[n]=a},setContentsStates:function(n,a){e.editorContentsStates=[].concat(e.editorContentsStates||t.editorContentsStates||[]),e.editorContentsStates[n]=a},removeContent:function(t){const{contents:n,editorContentsStates:o}=a();n.splice(t,1),o.splice(t,1),e.contents=n,e.editorContentsStates=o},addContent:function(){const{contents:t,editorContentsStates:n}=a();t.push(""),n.push(Ra.EDITOR),e.contents=t,e.editorContentsStates=n}}}(n,e.post);return Xt("post",e.post._id,c((()=>e.post.title)),n),K((()=>{e.post._id||(n.isPublic=!0)})),i(r(r(r(r(r({},a),o),oa()),function(e,t){const n=E(!1),a=c({get:()=>e.thumbnail||t.thumbnail,set:t=>e.thumbnail=t});return{thumbnail:a,uploadThumbnailOpen:n,toggleUpload(){n.value=!n.value},uploadComplete(e){a.value=e,n.value=!1}}}(n,e.post)),$a(n,e.post,["title","path"])),{editedPost:n,categoryPath:c((()=>n.category||e.post.category&&e.post.category.path)),isPublic:c((()=>"boolean"==typeof n.isPublic?n.isPublic:e.post.isPublic)),isPinned:c((()=>"boolean"==typeof n.isPinned?n.isPinned:e.post.isPinned)),mountCategory(t){e.post._id||(n.category=t)},submit(){const e=ea(n);t("submitted",e)}})}},Na=C();p("data-v-a31737f8");const Ma={class:"post-contents"};g();const Ka=Na(((e,t,n,a,o,s)=>{const l=_("el-checkbox"),r=_("FormInput"),i=_("AssetUploader"),u=_("el-form-item"),d=_("CategorySelector"),c=_("gp-editor"),m=_("PostContentEditor"),p=_("el-button"),g=_("el-form");return f(),h(g,{class:"post-form",onSubmit:V(a.submit,["prevent"])},{default:Na((()=>[b(l,{"model-value":a.isPublic,onChange:t[1]||(t[1]=e=>a.editedPost.isPublic=e)},{default:Na((()=>[L(S(e.$t("Public Post")),1)])),_:1},8,["model-value"]),b(l,{"model-value":a.isPinned,onChange:t[2]||(t[2]=e=>a.editedPost.isPinned=e)},{default:Na((()=>[L(S(e.$t("Pinned Post")),1)])),_:1},8,["model-value"]),b(r,{title:"Title","model-value":e.title,onInput:t[3]||(t[3]=e=>a.editedPost.title=e)},null,8,["model-value"]),b(r,{title:"Path",label:"leave empty to auto-generate","model-value":e.path,onInput:t[4]||(t[4]=e=>a.editedPost.path=e)},null,8,["model-value"]),b(u,{label:"Thumbnail"},{default:Na((()=>[b("a",{onClick:t[5]||(t[5]=(...t)=>e.toggleUpload&&e.toggleUpload(...t))},"Upload"),e.uploadThumbnailOpen?(f(),h(i,{key:0,onChange:e.uploadComplete},null,8,["onChange"])):(f(),h(r,{key:1,"model-value":e.thumbnail,placeholder:"https://",onInput:t[6]||(t[6]=t=>e.thumbnail=t)},null,8,["model-value"])),b("div",null,[e.uploadThumbnailOpen?y("",!0):(f(),h("img",{key:0,class:"thumbnail-image",src:a.editedPost.thumbnail||n.post.thumbnail},null,8,["src"]))])])),_:1}),b(u,{label:"Category"},{default:Na((()=>[b(d,{"model-value":a.categoryPath,onChange:t[7]||(t[7]=e=>a.editedPost.category=e),onMounted:a.mountCategory},null,8,["model-value","onMounted"])])),_:1}),b(r,{title:"Tags",modelValue:e.currentTagText,"onUpdate:modelValue":t[8]||(t[8]=t=>e.currentTagText=t),onKeydown:H(V(e.addTag,["prevent"]),["enter"]),placeholder:"ADD NEW TAG"},{default:Na((()=>[b("ul",null,[(f(!0),h(T,null,j(e.tags,(t=>(f(),h("li",{key:t},[L(S(t)+" ",1),b("i",{onClick:n=>e.removeTag(t),class:"el-icon-delete"},null,8,["onClick"])])))),128))])])),_:1},8,["modelValue","onKeydown"]),b(u,{label:"Short",class:"form-item-flex"},{default:Na((()=>[b("div",null,[b(c,{"model-value":n.post.short||a.editedPost.short,onInput:t[9]||(t[9]=e=>a.editedPost.short=e),config:e.editorConfig},null,8,["model-value","config"])])])),_:1}),b(u,{label:"Content",class:"form-item-flex"},{default:Na((()=>[b("div",Ma,[(f(!0),h(T,null,j(e.contents,(t=>(f(),h(m,{key:t.index,value:t.content,state:t.state,onRemove:n=>e.removeContent(t.index),onContentChange:n=>e.setContent(t.index,n),onTypeChange:n=>e.setContentsStates(t.index,n)},null,8,["value","state","onRemove","onContentChange","onTypeChange"])))),128)),b(p,{"native-type":"button",type:"text",icon:"el-icon-plus",onClick:e.addContent},null,8,["onClick"])])])),_:1}),b(p,{"native-type":"submit",loading:n.submitting},{default:Na((()=>[L(S(e.$t("SAVE")),1)])),_:1},8,["loading"])])),_:1},8,["onSubmit"])}));xa.render=Ka,xa.__scopeId="data-v-a31737f8";var Ha=A({name:"EditPost",components:{PageTitle:Ln,PostForm:xa},setup:()=>tn(U().params.postId)});const Ba={key:0,class:"edit-post-page"};Ha.render=function(e,t,n,a,o,s){const l=_("PageTitle"),r=_("PostForm");return e.post?(f(),h("div",Ba,[b(l,{title:"Edit Post","item-name":e.post.title},null,8,["item-name"]),b(r,{post:e.post,submitting:e.submitting,onSubmitted:e.submit},null,8,["post","submitting","onSubmitted"])])):y("",!0)};var za=A({name:"CreatePost",components:{PageTitle:Ln,PostForm:xa},setup(){const e=m(),{submitting:t,submit:n}=Re((e=>en.create(e)),{success:"Post created successfully",error:"Failed to create post"});return{submitting:t,submit:async t=>{try{const{_id:a}=await n(t);Zt("post"),e.push({name:"editPost",params:{postId:a}})}catch(a){}}}}});const Wa={class:"create-post-page"};za.render=function(e,t,n,a,o,s){const l=_("PageTitle"),r=_("PostForm");return f(),h("div",Wa,[b(l,{title:"Create Post"}),b(r,{post:{},submitting:e.submitting,onSubmitted:e.submit},null,8,["submitting","onSubmitted"])])};const Ga={setup(){const{posts:e,remove:t}=nn(),{t:n}=B();return{posts:e,remove:It(t),$t:n}}},qa=C();p("data-v-1cd784e4");const Ja=b("th",null,null,-1),Ya={key:0,class:"el-icon-check"},Qa={key:0,class:"el-icon-check"};g();const Xa=qa(((e,t,n,a,o,s)=>{const l=_("router-link");return f(),h("table",null,[b("thead",null,[b("tr",null,[b("th",null,S(a.$t("Title")),1),b("th",null,S(a.$t("Category")),1),b("th",null,S(a.$t("Path")),1),b("th",null,S(a.$t("Public")),1),b("th",null,S(a.$t("Pinned")),1),Ja])]),b("tbody",null,[(f(!0),h(T,null,j(a.posts,(e=>(f(),h("tr",{key:e._id},[b("td",null,[b(l,{to:{name:"editPost",params:{postId:e._id}}},{default:qa((()=>[L(S(e.title),1)])),_:2},1032,["to"])]),b("td",null,[b(l,{to:{name:"editCategory",params:{categoryPath:e.category.path}}},{default:qa((()=>[L(S(e.category.name),1)])),_:2},1032,["to"])]),b("td",null,S(e.path),1),b("td",null,[e.isPublic?(f(),h("i",Ya)):y("",!0)]),b("td",null,[e.isPinned?(f(),h("i",Qa)):y("",!0)]),b("td",null,[b("a",{onClick:V((t=>a.remove(e._id)),["prevent"]),class:"el-icon-delete"},null,8,["onClick"])])])))),128))])])}));Ga.render=Xa,Ga.__scopeId="data-v-1cd784e4";const Za={name:"Posts",components:{ListPageTitle:Vt,PostsList:Ga}},eo={class:"posts-page"};Za.render=function(e,t,n,a,o,s){const l=_("ListPageTitle"),r=_("PostsList");return f(),h("div",eo,[b(l,{title:"Posts","create-route":"createPost"}),b(r)])};const to={path:"posts",redirect:{name:"posts"},component:Un,children:[{path:"",name:"posts",component:Za},{path:"new",name:"createPost",component:za},{path:":postId",name:"editPost",component:Ha}]},no=Oe("/api/users");const ao={setup(){const{users:e}=function(){const{result:e}=kt((()=>no.getAll()),[]);return{users:e}}(),{remove:t}=function(e){const{submit:t,submitting:n}=Re((t=>no.remove(t).then((()=>e(t)))),{success:"User removed successfully",error:"Failed to remove user"});return{remove:It((e=>t(e._id))),removing:n}}((t=>{e.value=e.value.filter((e=>e._id!==t))}));return{users:e,remove:t,join:e=>e.join(", ")}}},oo=C();p("data-v-7eef75f8");const so=b("th",null,null,-1);g();const lo=oo(((e,t,n,a,o,s)=>{const l=_("router-link");return f(),h("table",null,[b("thead",null,[b("tr",null,[b("th",null,S(e.$t("Name")),1),b("th",null,S(e.$t("Email")),1),b("th",null,S(e.$t("Roles")),1),so])]),b("tbody",null,[(f(!0),h(T,null,j(a.users,(e=>(f(),h("tr",{key:e._id},[b("td",null,[b(l,{to:{name:"editUser",params:{userId:e._id}}},{default:oo((()=>[L(S(e.name),1)])),_:2},1032,["to"])]),b("td",null,[b("a",{href:e.email},S(e.email),9,["href"])]),b("td",null,S(a.join(e.roles)),1),b("td",null,[b("a",{onClick:V((t=>a.remove(e)),["prevent"]),class:"el-icon-delete"},null,8,["onClick"])])])))),128))])])}));ao.render=lo,ao.__scopeId="data-v-7eef75f8";const ro={name:"Users",components:{ListPageTitle:Vt,UsersList:ao}},io={class:"about-page"};ro.render=function(e,t,n,a,o,s){const l=_("ListPageTitle"),r=_("UsersList");return f(),h("div",io,[b(l,{title:"Users","create-route":"createUser"}),b(r)])};const uo={components:{FormInput:Yn},props:{user:Object},setup(e,{emit:t}){const n=d({name:null,email:null,password:null,roles:e.user&&e.user._id?null:["user"]});return i(r({editedData:n},$a(n,e.user,["name","email"])),{roles:c({get:()=>n.roles||e.user.roles||[],set:e=>n.roles=e}),submit(){t("submitted",ea(n))}})}},co=C();p("data-v-1b3512c9");const mo=b("small",null,"Leave empty to ignore changes",-1);g();const po=co(((e,t,n,a,o,s)=>{const l=_("FormInput"),r=_("el-input"),i=_("el-form-item"),u=_("el-checkbox"),d=_("el-checkbox-group"),c=_("el-button"),m=_("el-form");return f(),h(m,{onSubmit:V(a.submit,["prevent"])},{default:co((()=>[b(l,{title:"Name","model-value":e.name,onInput:t[1]||(t[1]=e=>a.editedData.name=e)},null,8,["model-value"]),b(l,{title:"Email","model-value":e.email,onInput:t[2]||(t[2]=e=>a.editedData.email=e)},null,8,["model-value"]),b(i,{label:"Password"},{default:co((()=>[mo,b(r,{name:"password",type:"password",modelValue:a.editedData.password,"onUpdate:modelValue":t[3]||(t[3]=e=>a.editedData.password=e)},null,8,["modelValue"])])),_:1}),b(i,null,{default:co((()=>[b(d,{modelValue:a.roles,"onUpdate:modelValue":t[4]||(t[4]=e=>a.roles=e)},{default:co((()=>[b(u,{label:"admin"}),b(u,{label:"editor"}),b(u,{label:"user"})])),_:1},8,["modelValue"])])),_:1}),b(c,{"native-type":"submit"},{default:co((()=>[L(S(e.$t("SAVE")),1)])),_:1})])),_:1},8,["onSubmit"])}));uo.render=po,uo.__scopeId="data-v-1b3512c9";const go={name:"EditUser",components:{PageTitle:Ln,UserForm:uo},setup:()=>function(e){const{result:t}=kt((()=>no.getOne(e))),{submit:n,submitting:a}=Re((t=>no.update(e,t)),{success:"User updated successfully",error:"Failed to update user"});return{user:t,updateUser:n,submitting:a}}(U().params.userId)},_o={class:"edit-post-page"};go.render=function(e,t,n,a,o,s){const l=_("PageTitle"),r=_("UserForm");return f(),h("div",_o,[e.user?(f(),h(l,{key:0,title:"Edit User","item-name":e.user.name},null,8,["item-name"])):y("",!0),e.user?(f(),h(r,{key:1,user:e.user,onSubmitted:e.updateUser},null,8,["user","onSubmitted"])):y("",!0)])};const vo={name:"CreateUser",components:{PageTitle:Ln,UserForm:uo},setup(){const e=useRouter(),{createUser:t}=function(){const{submit:e,submitting:t}=Re(no.create,{success:"User created successfully",error:"Failed to create user"});return{createUser:e,submitting:t}}();return{save:async n=>{const{_id:a}=await t(n);e.push({name:"editUser",params:{userId:a}})}}}};vo.render=function(e,t,n,a,o,s){const l=_("PageTitle"),r=_("UserForm");return f(),h("div",null,[b(l,{title:"Create User"}),b(r,{user:{},onSubmitted:a.save},null,8,["onSubmitted"])])};const fo={path:"users",redirect:{name:"users"},component:Un,children:[{path:"",name:"users",component:ro},{path:"new",name:"createUser",component:vo},{path:":userId",name:"editUser",component:go}]};function ho(e){return i(r({},function(e){const{result:t}=kt((()=>ta.getOne(e)));return{config:t}}(e)),{updateConfiguration:t=>ta.update(e,t)})}const bo={name:"ConfigurationsList",setup:()=>function(){const{result:e}=kt((()=>ta.getAll()));return{list:e}}()},yo=C();p("data-v-b55657be");const Po={key:0,class:"el-icon-check"};g();const Co=yo(((e,t,n,a,o,s)=>{const l=_("router-link");return f(),h("div",null,[b("table",null,[b("thead",null,[b("tr",null,[b("th",null,S(e.$t("Name")),1),b("th",null,S(e.$t("Public")),1),b("th",null,S(e.$t("Description")),1)])]),b("tbody",null,[(f(!0),h(T,null,j(e.list,(t=>(f(),h("tr",{key:t.key},[b("td",null,[b(l,{to:{name:"editConfiguration",params:{key:t.key}}},{default:yo((()=>[L(S(e.$t(t.key)),1)])),_:2},1032,["to"])]),b("td",null,[t.public?(f(),h("i",Po)):y("",!0)]),b("td",null,S(t.description),1)])))),128))])])])}));bo.render=Co,bo.__scopeId="data-v-b55657be";const So={components:{PageTitle:Ln,ConfigurationsList:bo}},ko={class:"categories-page"};So.render=function(e,t,n,a,o,s){const l=_("PageTitle"),r=_("ConfigurationsList");return f(),h("div",ko,[b(l,{title:"Configurations"}),b(r)])};const Eo={logoUrl:["text","upload"]};function Io(e){const t=Object.keys(e),n=d(t.reduce(((e,t)=>(e[t]=null,e)),{})),a=d(function(e,t,n=[]){return n.reduce(((n,a)=>(n[a]=c({get:()=>null===e[a]?t[a]:e[a],set:t=>e[a]=t}),n)),{})}(n,e,t)),o=d(t.reduce(((e,t)=>{const n=Eo[t]||["number"==typeof a[t]?"number":"text"];return e[t]={options:n,selected:n[0]},e}),{}));return{keys:t,valuesTypes:o,edited:n,updated:a}}const To={name:"ConfigurationForm",components:{FormInput:Yn},props:{metadata:Object,submitting:Boolean},setup({metadata:e},{emit:t}){const{updated:n,edited:a,keys:o,valuesTypes:s}=Io(e);return{keys:o,valuesTypes:s,updated:n,edited:a,save(){t("save",ea(a))}}}},jo=C(),Lo=jo(((e,t,n,a,o,s)=>{const l=_("el-switch"),r=_("FormInput"),i=_("el-button"),u=_("el-form");return f(),h(u,{onSubmit:V(a.save,["prevent"])},{default:jo((()=>[(f(!0),h(T,null,j(a.keys,(t=>(f(),h(T,{key:t},[2===a.valuesTypes[t].options.length?(f(),h(l,{key:0,modelValue:a.valuesTypes[t].selected,"onUpdate:modelValue":e=>a.valuesTypes[t].selected=e,"inactive-value":a.valuesTypes[t].options[0],"active-value":a.valuesTypes[t].options[1],"inactive-text":e.$t(a.valuesTypes[t].options[0]),"active-text":e.$t(a.valuesTypes[t].options[1])},null,8,["modelValue","onUpdate:modelValue","inactive-value","active-value","inactive-text","active-text"])):y("",!0),b(r,{title:t,modelValue:a.updated[t],"onUpdate:modelValue":e=>a.updated[t]=e,type:a.valuesTypes[t].selected},null,8,["title","modelValue","onUpdate:modelValue","type"])],64)))),128)),b(i,{"native-type":"submit",loading:n.submitting},{default:jo((()=>[L(S(e.$t("SAVE")),1)])),_:1},8,["loading"])])),_:1},8,["onSubmit"])}));To.render=Lo,To.__scopeId="data-v-19fbeebe";const Ao={name:"EditConfiguration",components:{ConfigurationForm:To,PageTitle:Ln},setup(){const{params:e}=U(),{config:t,updateConfiguration:n}=ho(e.key),{submitting:a,submit:o}=Re((e=>n({metadata:e})),{success:"Configurations updated successfully",error:"Failed to updated configurations"});return{config:t,submit:o,submitting:a}}},Vo={key:0,class:"category-page"};Ao.render=function(e,t,n,a,o,s){const l=_("PageTitle"),r=_("ConfigurationForm");return a.config?(f(),h("div",Vo,[b(l,{title:"Edit Configuration","item-name":e.$t(a.config.key)},null,8,["item-name"]),b(r,{metadata:a.config.metadata,submitting:a.submitting,onSave:a.submit},null,8,["metadata","submitting","onSave"])])):y("",!0)};const Oo={path:"/configurations",redirect:{name:"configurations"},component:Un,children:[{path:"",name:"configurations",component:So},{path:":key",name:"editConfiguration",component:Ao}]};const Do={name:"DraftsList",setup(){const e=E([]),{error:t}=Ue();return de.get("/api/drafts/all").then(ce).then((t=>e.value=t)).catch((()=>t("Failed to load drafts list"))),{drafts:e,getDraftLink:e=>{let t;return t="post"===e.contextType?e.contextId?"editPost":"createPost":e.contextId?"editCategory":"createCategory",{name:t,params:e.contextRouteParams}},deleteDraft:It(Re((async t=>{await Jt(t.contextType,t.contextId),e.value=e.value.filter((e=>e!==t))}),{success:"Draft deleted successfully",error:"Failed to remove draft"}).submit)}}},wo=C();p("data-v-7470739a");const Uo=b("th",null,null,-1);g();const Ro=wo(((e,t,n,a,o,s)=>{const l=_("router-link");return f(),h("div",null,[b("table",null,[b("thead",null,[b("tr",null,[b("th",null,S(e.$t("Context")),1),b("th",null,S(e.$t("Name")),1),Uo])]),b("tbody",null,[(f(!0),h(T,null,j(a.drafts,(t=>(f(),h("tr",{key:t._id},[b("td",null,S(e.$t(t.contextType)),1),b("td",null,[b(l,{to:a.getDraftLink(t)},{default:wo((()=>[L(S(t.contextDisplayName),1)])),_:2},1032,["to"])]),b("td",null,[b("a",{onClick:V((e=>a.deleteDraft(t)),["prevent"]),class:"el-icon-delete"},null,8,["onClick"])])])))),128))])])])}));Do.render=Ro,Do.__scopeId="data-v-7470739a";var Fo={name:"Drafts",components:{DraftsList:Do,PageTitle:Ln}};const $o={class:"categories-page"};Fo.render=function(e,t,n,a,o,s){const l=_("PageTitle"),r=_("DraftsList");return f(),h("div",$o,[b(l,{title:"Drafts"}),b(r)])};const xo={path:"/drafts",name:"drafts",component:Fo},No=z({history:W("/gp-admin"),routes:[{path:"/",name:"authenticated",component:ot,children:[{path:"/",name:"home",component:ut},Oo,Rn,da,Aa,to,fo,xo]},{path:"/login",name:"login",component:bt,meta:{guest:!0}}]});No.beforeEach(((e,t,n)=>"login"===e.name||e.meta.guest||localStorage.refresh_token?n():(ge(),me.userPromise||me.user?n():void n({name:"login"}))));var Mo={name:"App",setup(){const e=aa();return I((()=>{var t;return(null==(t=e.value)?void 0:t.metadata)&&e.value.metadata.language}),(async e=>{await Gt(e),document.dir=qt("appDirection")})),{config:e}}};const Ko={id:"app"};Mo.render=function(e,t,n,a,o,s){const l=_("router-view");return f(),h("div",Ko,[a.config?(f(),h(l,{key:0})):y("",!0)])};const Ho=re(Mo);var Bo;Ho.use(No),Ho.use(Bt),Ho.use(ie),Bo=Ho,G.use(q),Bo.use(J),Bo.use(Y),Bo.use(Q),Bo.use(X),Bo.use(Z),Bo.use(ee),Bo.use(te),Bo.use(ne),Bo.use(ae),Bo.use(oe),Bo.use(se),Bo.use(le),Ho.mount("#app");
